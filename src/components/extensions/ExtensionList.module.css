.root {
  display: flex; flex-direction: column; height: 100%;
  overflow: hidden; animation: fadeIn 0.14s ease both;
}
.header {
  display: flex; align-items: center; justify-content: space-between;
  padding: var(--sp-5) var(--sp-6) var(--sp-3); flex-shrink: 0;
}
.heading {
  font-family: var(--font-ui); font-size: var(--text-xs); font-weight: var(--weight-normal);
  color: var(--text-faint); letter-spacing: var(--tracking-wider); text-transform: uppercase;
}
.headerActions { display: flex; gap: var(--sp-1); }
.iconBtn {
  display: flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; border-radius: var(--radius-md);
  color: var(--text-muted); transition: color var(--t-base), background var(--t-base);
}
.iconBtn:hover:not(:disabled) { color: var(--text-primary); background: var(--bg-raised); }
.iconBtn:disabled { opacity: 0.4; }
.iconBtnActive { color: var(--accent-fg); background: var(--accent-muted); }
.iconBtnActive:hover:not(:disabled) { color: var(--accent-fg); background: var(--accent-muted); filter: brightness(1.1); }

.externalPanel {
  display: flex; flex-direction: column; gap: var(--sp-2);
  padding: 0 var(--sp-6) var(--sp-3); flex-shrink: 0;
  animation: fadeIn 0.1s ease both;
}
.externalHeader {
  display: flex; align-items: center; justify-content: space-between;
}
.externalTitle {
  font-family: var(--font-ui); font-size: var(--text-xs);
  color: var(--text-muted); letter-spacing: var(--tracking-wide);
}
.externalRow {
  display: flex; gap: var(--sp-2);
}
.externalInput {
  flex: 1; background: var(--bg-raised); border: 1px solid var(--border-strong);
  border-radius: var(--radius-md); padding: 6px var(--sp-3);
  color: var(--text-primary); font-size: var(--text-sm); outline: none;
  transition: border-color var(--t-base);
}
.externalInput:focus { border-color: var(--border-focus); }
.externalInput:disabled { opacity: 0.5; }
.externalInputError { border-color: var(--color-error) !important; }
.externalError {
  font-family: var(--font-ui); font-size: var(--text-xs);
  color: var(--color-error); letter-spacing: var(--tracking-wide);
  padding: 0 2px;
}
.installBtn {
  display: flex; align-items: center; gap: var(--sp-1);
  font-family: var(--font-ui); font-size: var(--text-xs); letter-spacing: var(--tracking-wide);
  padding: 6px 14px; border-radius: var(--radius-md);
  background: var(--accent-muted); color: var(--accent-fg);
  border: 1px solid var(--accent-dim); cursor: pointer; flex-shrink: 0;
  transition: filter var(--t-base), opacity var(--t-base);
  white-space: nowrap;
}
.installBtn:hover:not(:disabled) { filter: brightness(1.1); }
.installBtn:disabled { opacity: 0.5; cursor: default; }
.installBtnSuccess {
  background: var(--color-success, #2d6a3f); border-color: var(--color-success, #2d6a3f);
  color: #fff;
}

.controls {
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 var(--sp-6) var(--sp-3); gap: var(--sp-3); flex-shrink: 0;
}
.tabs { display: flex; gap: 2px; }
.tab {
  font-family: var(--font-ui); font-size: var(--text-xs); letter-spacing: var(--tracking-wide);
  padding: 4px 10px; border-radius: var(--radius-md); border: none;
  background: none; color: var(--text-muted); cursor: pointer;
  transition: background var(--t-base), color var(--t-base);
}
.tab:hover { background: var(--bg-raised); color: var(--text-secondary); }
.tabActive { background: var(--accent-muted); color: var(--accent-fg); }
.tabActive:hover { background: var(--accent-muted); color: var(--accent-fg); }

.searchWrap { position: relative; display: flex; align-items: center; }
.searchIcon { position: absolute; left: 9px; color: var(--text-faint); pointer-events: none; }
.search {
  background: var(--bg-raised); border: 1px solid var(--border-dim);
  border-radius: var(--radius-md); padding: 5px 10px 5px 26px;
  color: var(--text-primary); font-size: var(--text-sm); width: 160px; outline: none;
  transition: border-color var(--t-base);
}
.search::placeholder { color: var(--text-faint); }
.search:focus { border-color: var(--border-strong); }

.list { flex: 1; overflow-y: auto; padding: 0 var(--sp-4) var(--sp-4); display: flex; flex-direction: column; gap: 1px; }

.group { display: flex; flex-direction: column; }

.row {
  display: flex; align-items: center; gap: var(--sp-3);
  padding: 8px var(--sp-3); border-radius: var(--radius-md);
  border: 1px solid transparent;
  transition: background var(--t-fast), border-color var(--t-fast);
}
.row:hover { background: var(--bg-raised); border-color: var(--border-dim); }

.icon {
  width: 32px; height: 32px; border-radius: var(--radius-md);
  object-fit: cover; flex-shrink: 0; background: var(--bg-raised);
}
.info { flex: 1; display: flex; flex-direction: column; gap: 2px; overflow: hidden; min-width: 0; }
.name {
  font-size: var(--text-base); font-weight: var(--weight-medium);
  color: var(--text-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.meta {
  display: flex; align-items: center; gap: var(--sp-2);
  font-family: var(--font-ui); font-size: var(--text-2xs); color: var(--text-faint);
  letter-spacing: var(--tracking-wide);
}

.langTag {
  background: var(--bg-overlay); border: 1px solid var(--border-dim);
  border-radius: var(--radius-sm); padding: 1px 5px;
  font-family: var(--font-ui); font-size: var(--text-2xs);
  color: var(--text-muted); letter-spacing: var(--tracking-wider);
}
.nsfwTag {
  background: transparent; border: 1px solid var(--color-error);
  border-radius: var(--radius-sm); padding: 1px 5px;
  font-family: var(--font-ui); font-size: var(--text-2xs);
  color: var(--color-error); letter-spacing: var(--tracking-wider);
}
.updateBadge {
  font-family: var(--font-ui); font-size: var(--text-2xs); letter-spacing: var(--tracking-wide);
  background: var(--accent-muted); color: var(--accent-fg);
  border: 1px solid var(--accent-dim); border-radius: var(--radius-sm);
  padding: 2px 6px; flex-shrink: 0;
}
.updateBadgeSmall {
  font-family: var(--font-ui); font-size: var(--text-2xs);
  color: var(--accent-fg); flex-shrink: 0;
}

.rowActions { display: flex; gap: var(--sp-1); flex-shrink: 0; }
.actionBtn {
  font-family: var(--font-ui); font-size: var(--text-xs); letter-spacing: var(--tracking-wide);
  padding: 4px 10px; border-radius: var(--radius-md);
  background: var(--accent-muted); color: var(--accent-fg);
  border: 1px solid var(--accent-dim); cursor: pointer; flex-shrink: 0;
  transition: filter var(--t-base);
}
.actionBtn:hover { filter: brightness(1.1); }
.actionBtnDim {
  font-family: var(--font-ui); font-size: var(--text-xs); letter-spacing: var(--tracking-wide);
  padding: 4px 10px; border-radius: var(--radius-md);
  background: none; color: var(--text-faint);
  border: 1px solid var(--border-dim); cursor: pointer; flex-shrink: 0;
  transition: color var(--t-base), border-color var(--t-base);
}
.actionBtnDim:hover { color: var(--color-error); border-color: var(--color-error); }

.expandBtn {
  display: flex; align-items: center; gap: 3px;
  padding: 4px 6px; border-radius: var(--radius-sm);
  color: var(--text-faint); flex-shrink: 0;
  transition: color var(--t-base), background var(--t-base);
}
.expandBtn:hover { color: var(--text-muted); background: var(--bg-overlay); }
.expandCount {
  font-family: var(--font-ui); font-size: var(--text-2xs);
  letter-spacing: var(--tracking-wide);
}

.variants {
  display: flex; flex-direction: column; gap: 1px;
  margin: 1px 0 2px calc(32px + var(--sp-3) + var(--sp-3));
  padding-left: var(--sp-3);
  border-left: 1px solid var(--border-dim);
  animation: fadeIn 0.1s ease both;
}
.variantRow {
  display: flex; align-items: center; gap: var(--sp-2);
  padding: 5px var(--sp-2); border-radius: var(--radius-md);
  transition: background var(--t-fast);
}
.variantRow:hover { background: var(--bg-raised); }
.variantName {
  flex: 1; font-size: var(--text-sm); color: var(--text-muted);
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.variantVersion {
  font-family: var(--font-ui); font-size: var(--text-2xs);
  color: var(--text-faint); letter-spacing: var(--tracking-wide); flex-shrink: 0;
}
.variantActions { flex-shrink: 0; }

.empty {
  display: flex; align-items: center; justify-content: center;
  flex: 1; color: var(--text-faint);
  font-family: var(--font-ui); font-size: var(--text-xs); letter-spacing: var(--tracking-wide);
}

/* ── Panel shared styles ── */
.externalPanel {
  display: flex; flex-direction: column; gap: var(--sp-2);
  padding: 0 var(--sp-6) var(--sp-3); flex-shrink: 0;
  animation: fadeIn 0.1s ease both;
}
.panelHeader {
  display: flex; align-items: center; justify-content: space-between;
}
.panelTitle {
  font-family: var(--font-ui); font-size: var(--text-xs);
  color: var(--text-muted); letter-spacing: var(--tracking-wide);
}
.panelError {
  font-family: var(--font-ui); font-size: var(--text-xs);
  color: var(--color-error); letter-spacing: var(--tracking-wide);
  padding: 0 2px;
}
.externalRow { display: flex; gap: var(--sp-2); }
.externalInput {
  flex: 1; background: var(--bg-raised); border: 1px solid var(--border-strong);
  border-radius: var(--radius-md); padding: 6px var(--sp-3);
  color: var(--text-primary); font-size: var(--text-sm); outline: none;
  transition: border-color var(--t-base);
}
.externalInput:focus { border-color: var(--border-focus); }
.externalInput:disabled { opacity: 0.5; }
.externalInputError { border-color: var(--color-error) !important; }
.installBtn {
  display: flex; align-items: center; gap: var(--sp-1);
  font-family: var(--font-ui); font-size: var(--text-xs); letter-spacing: var(--tracking-wide);
  padding: 6px 14px; border-radius: var(--radius-md);
  background: var(--accent-muted); color: var(--accent-fg);
  border: 1px solid var(--accent-dim); cursor: pointer; flex-shrink: 0;
  transition: filter var(--t-base), opacity var(--t-base);
  white-space: nowrap;
}
.installBtn:hover:not(:disabled) { filter: brightness(1.1); }
.installBtn:disabled { opacity: 0.5; cursor: default; }
.installBtnSuccess {
  background: color-mix(in srgb, var(--accent-fg) 20%, transparent);
  border-color: var(--accent-fg); color: var(--accent-fg);
}

/* ── Repo list ── */
.repoLoading {
  display: flex; align-items: center; justify-content: center;
  padding: var(--sp-3);
}
.repoEmpty {
  font-family: var(--font-ui); font-size: var(--text-xs);
  color: var(--text-faint); letter-spacing: var(--tracking-wide);
  padding: var(--sp-1) 2px;
}
.repoList {
  display: flex; flex-direction: column; gap: 2px;
}
.repoRow {
  display: flex; align-items: center; gap: var(--sp-2);
  padding: 5px var(--sp-2); border-radius: var(--radius-md);
  background: var(--bg-raised); border: 1px solid var(--border-dim);
}
.repoUrl {
  flex: 1; font-family: var(--font-mono, monospace); font-size: var(--text-2xs);
  color: var(--text-muted); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
  letter-spacing: 0;
}
.repoRemoveBtn {
  display: flex; align-items: center; justify-content: center;
  width: 20px; height: 20px; border-radius: var(--radius-sm);
  color: var(--text-faint); flex-shrink: 0;
  transition: color var(--t-base), background var(--t-base);
}
.repoRemoveBtn:hover:not(:disabled) { color: var(--color-error); background: var(--bg-overlay); }
.repoRemoveBtn:disabled { opacity: 0.4; }